|
  // Update cart-total-price if the cart_item is checked
  if ($("#cart-item-#{@cart_item.id} .input-cart-item").is(":checked")) {
    $(".cart-total-price").text((Number($(".cart-total-price").text()) - Number("#{@cart_item.quantity * @cart_item.product.price}")).toFixed(2))
    $(".cart-final-items").text(Number($(".cart-final-items").text()) - 1)
  }

  // If cart_item is the only item in the current shop
  if ($("#cart-item-#{@cart_item.id}").closest(".cart-item").siblings().length == 0) {
    // If there is only the current shop
    if ($(".shop-items").length == 1) {
      $(".cart-info").remove()
      $(".cart-checkout").remove()
      $(".cart-container").append("#{ j render "cart_items/empty" }")
    }
    else {
      $("#cart-item-#{@cart_item.id}").closest(".shop-items").remove()
    }
  }
  // otherwise, delete the cart_item only
  else {
    $("#cart-item-#{@cart_item.id}").closest(".cart-item").remove()
  }

  // Update cart-total-items 
  $(".cart-total-items").text(Number($(".cart-total-items").first().text()) - 1)
